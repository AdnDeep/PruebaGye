function eMASReferencialJs() { } function funcionCerrar() { } eMASReferencialJs.serverPath = "", eMASReferencialJs.instrumentationKey = "", eMASReferencialJs.tipoMensaje = { Exito: 0, Error: 1, Advertencia: 2, Prompt: 3, Contrato: 4 }, eMASReferencialJs.Advertencia = { Titulo: "Advertencia" }, eMASReferencialJs.Informativo = { Titulo: "Informativo" }, eMASReferencialJs.Exito = { Titulo: "Exito" }, eMASReferencialJs.Error = { ErrorGeneral: "Se presento un error en la aplicaci&oacute;n, por favor comun&iacute;quese con la Direcci&oacute;n de Inform&aacute;tica.", ErrorPlanificacionCargo: "No podra actualizar el registro porque existe al menos un empleado asignado en la planificaci&oacute;n.", ErrorFaltaIdentificacion: "Debe escribir un número de identificaci&oacute;n para buscar.", ErrorPerderCambios: "Se perderan todos los cambios realizados </br> ¿Desea continuar?" }, eMASReferencialJs.botonAceptar = { Nombre: "Aceptar", Accion: "$(this).parents('.modal-dialog').parent().modal('hide');" }, eMASReferencialJs.botonNo = { Nombre: "No", Accion: "$(this).parents('.modal-dialog').parent().modal('hide');" }, eMASReferencialJs.mostrarProgress = function () { let e = eMASReferencialJs.htmlToElement('<div style="" id="loaderGif"><div class="loader">Loading...</div></div>'); document.body.appendChild(e) }, eMASReferencialJs.ocultarProgress = function () { eMASReferencialJs.FadeOutEffect("#loaderGif", 500, (function () { null != document.querySelector("#loaderGif") && null != document.querySelector("#loaderGif") && document.querySelector("#loaderGif").remove() })) }, eMASReferencialJs.mostrarPopup = function (e, n, t, a) { var r = $("#VentanaPopup").clone().appendTo("#Popups"); r.find(".modal-title").html(e), r.find(".modal-content").css("border", "1px solid #4f6d81"), r.find(".modal-header").css("background", '#fff url("../Referencial/Images/prompt_header.gif") repeat-x'), r.find(".modal-header").css("background-size", "cover"), r.find(".modal-header").css("color", "#355468"), r.find(".modal-footer").empty(), r.find(".modal-footer").css("background", "none"), r.find(".modal-footer").css("border", "none"), $.get(n, (function (e) { r.find(".modal-body").html(e), t() })), r.modal("show"), r.on("hidden.bs.modal", (function () { a(), r.html("") })) }, eMASReferencialJs.cerrarPopupDetail = function () { let e = $("#popup-detail"); null != e && e.modal("hide") }, eMASReferencialJs.ocultarMensajes = function () { var e = $("#VentanaMensajes"); null != e && e.modal("hide") }, eMASReferencialJs.mostrarPopupDetail = function (e, n, t, a, r) { let o = $("#popup-detail"); o.find(".modal-title").html(e), o.find(".modal-content").css("border", "1px solid #4f6d81"), o.find(".modal-header").css("background", '#fff url("../Referencial/Images/prompt_header.gif") repeat-x'), o.find(".modal-header").css("background-size", "cover"), o.find(".modal-header").css("color", "#355468"), o.find(".modal-footer").empty(), o.find(".modal-footer").css("background", "none"), o.find(".modal-footer").css("border", "none"), eMASReferencialJs.FetchPost(n, t, (function (e) { return null == e || null == e ? (console.error("Se ha producido una respuesta vacia desde el servidor"), void eMASReferencialJs.SetearMensajeDefaultAdvertencia("Se ha producido una novedad en el aplicativo, por favor intente nuevamente en unos minutos {1}.")) : "EXITO" != e.messagetype ? (console.error(e.message), void eMASReferencialJs.SetearMensajeDefaultAdvertencia("Se ha producido una novedad en el aplicativo, por favor intente nuevamente en unos minutos {2}.")) : (o.find(".modal-body").html(e.content), void o.modal({ backdrop: "static", keyboard: !1, show: !0 })) }), a, ""), o.on("hidden.bs.modal", (function () { o.find(".modal-body").html("") })) }, eMASReferencialJs.generarBoton = function (e, n) { var t = new Object; return t.Nombre = e, t.Accion = n, t }, eMASReferencialJs.mostrarMensajes = function (e, n, t, a) { var r = $("#VentanaMensajes"); r.find(".modal-header").html(e).css("fontWeight", "bold"); var o = r.find(".modal-body"); for (var l in o.html(""), t) o.append(t[l].Description + "<br>"); var i = r.find(".modal-footer"); i.html(""), r.find(".modal-content").css("background", "white"), r.find(".modal-header").css("color", "#000"), r.find(".modal-body").css("color", "#000"), r.find(".modal-body").css("min-height", "80px"), r.find(".modal-footer").css("background-color", "transparent"), r.find(".modal-footer").css("display", "unset"); let s = eMASReferencialJs.ObtenerAppConfig().RutaBase; if (s = "/" === s ? "/" : s + "/", n === eMASReferencialJs.tipoMensaje.Exito) for (var c in r.find(".modal-content").css("border", "1px solid #60a174"), r.find(".modal-header").css("background", '#e6f1e9 url("' + s + 'Referencial/Images/success50.png") no-repeat right center'), a) i.append('<a class="btn btn-sm btnSuccess" onclick="' + a[c].Accion + '">' + a[c].Nombre + "</a>"); else if (n === eMASReferencialJs.tipoMensaje.Error) for (var d in r.find(".modal-content").css("border", "1px solid #924949"), r.find(".modal-header").css("background", '#f2e4e4 url("' + s + 'Referencial/Images/error50.png") no-repeat right center'), a) i.append('<a class="btn btn-sm btnError" onclick="' + a[d].Accion + '">' + a[d].Nombre + "</a>"); else if (n === eMASReferencialJs.tipoMensaje.Advertencia) for (var u in r.find(".modal-content").css("border", "1px solid #c5a524"), r.find(".modal-header").css("background", '#fffcd9 url("' + s + 'Referencial/Images/warning50.png") no-repeat right center'), a) i.append('<a class="btn btn-sm btnWarning" onclick="' + a[u].Accion + '">' + a[u].Nombre + "</a>"); else if (n === eMASReferencialJs.tipoMensaje.Prompt) for (var f in r.find(".modal-content").css("border", "1px solid #5b4f4f"), r.find(".modal-header").css("background", '#d5d8da url("' + s + 'Referencial/Images/prompt50.png") no-repeat right center'), a) "Si" === a[f].Nombre ? i.append('<a class="btn btn-sm btnSi" onclick="' + a[f].Accion + '">' + a[f].Nombre + "</a>") : "No" === a[f].Nombre ? i.append('<a class="btn btn-sm btnNo" onclick="' + a[f].Accion + '">' + a[f].Nombre + "</a>") : i.append('<a class="btn btn-sm" style="background:#fff url(' + s + 'Referencial/Images/prompt_header.gif) repeat-x; color: #6C6767; border:1px solid #5b4f4f; padding: 0rem 0.5rem;" href="#" onclick="' + a[f].Accion + '">' + a[f].Nombre + "</a>"); else if (n === eMASReferencialJs.tipoMensaje.Contrato) for (var p in r.find(".modal-header").css("background", "#93d9e4"), a) i.append('<a class="' + a[l].Clase + '" onclick="' + a[p].Accion + '">' + a[p].Nombre + "</a>"); r.modal({ backdrop: "static", keyboard: !1, show: !0 }), r.on("hidden.bs.modal", (function (e) { r.find(".modal-header").html(""), r.find(".modal-body").html(""), r.find(".modal-footer").html("") })) }, eMASReferencialJs.mostrarPanelMensajes = function (e, n) { var t = $("#DocumentoTramiteSolicitud").parents(".modal-dialog").parent().find(".modal-footer"); t.empty(); let a = eMASReferencialJs.ObtenerAppConfig().RutaBase; for (var r in a = "/" === a ? "/" : a + "/", n) t.append(n[r].Description + "<br>"); e === eMASReferencialJs.tipoMensaje.Exito ? (t.css("background", '#fff url("' + a + 'Referencial/Images/success_header.gif") repeat-x'), t.css("color", "#3c7f51"), t.css("border", "1px solid #60a174")) : e === eMASReferencialJs.tipoMensaje.Error ? (t.css("background", '#fff url("' + a + 'Referencial/Images/error_header.gif") repeat-x'), t.css("color", "#6f2c2c"), t.css("border", "1px solid #924949")) : e === eMASReferencialJs.tipoMensaje.Advertencia && (t.css("background", '#fff url("' + a + 'Referencial/Images/warning_header.gif") repeat-x'), t.css("color", "#957c17"), t.css("border", "1px solid #c5a524")), t.css("background-size", "cover"), t.css("text-align", "justify"), t.css("font-size", "13px"), t.css("font-weight", "bold"), t.css("padding", "5px") }, eMASReferencialJs.generateBuscador = function (e, n, t, a, r, o) { e.addClass("input-group"), e.css("width", "100%"); var l = a ? "required" : "", i = null == o || "" === o ? "" : 'maxlength="' + o + '"'; return null == r || "" === r ? e.append('<input type="text" class="form-control nopegar noAceptaCaracterEspecial" name="' + n + '" ' + l + " " + i + " />") : e.append('<input type="text" class="form-control ' + r + '" name="' + n + '" ' + l + " " + i + " />"), e.append('<div class="input-group-append"><button type="button" class="btn btnBuscar" id="' + t + '" name="' + t + '"><i class="fa fa-search"></i></button></div>'), a && e.append('<div class="invalid-feedback">Campo requerido.</div>'), e }, eMASReferencialJs.GenerarComponenteBuscador = function (e, n, t) { return e.addClass("input-group"), e.css("width", "100%"), e.append('<input type="text" class="form-control" name="' + n + '" ' + t ? "required" : ">"), e.append('<div class="input-group-append"><button type="button" class="btn btnBuscar" name="button' + n + '"><i class="fa fa-search"></i></button></div>'), t && e.append('<div class="invalid-feedback">Campo requerido.</div>'), e }, eMASReferencialJs.EventoNoPegar = function () { $(".nopegar").bind("paste", (function (e) { e.preventDefault() })) }, eMASReferencialJs.EventoAceptaValorEntero = function () { $(".aceptaValorEntero").on("keypress keyup blur", (function (e) { $(this).val($(this).val().replace(/[^\d].+/, "")), 0 !== e.which && 8 !== e.which && (e.keyCode < 37 || e.keyCode > 40) && (e.which < 48 || e.which > 57) && e.preventDefault() })) }, eMASReferencialJs.EventoAceptaValorDecimal = function () { $(".aceptaValorDecimal").on("keypress keyup blur", (function (e) { if ($(this).val($(this).val().replace(/[^0-9\.]/g, "")), 0 !== e.which && 8 !== e.which && (e.keyCode < 37 || e.keyCode > 40) && (46 !== e.which || -1 !== $(this).val().indexOf(".")) && (e.which < 48 || e.which > 57)) e.preventDefault(); else if (e.which >= 48 && e.which <= 57) { var n = $(this).val() + String.fromCharCode(e.which); (parseFloat(n) < 0 || parseFloat(n) > 99999999999999 || n.substring(n.indexOf(".") + 1, -1 !== n.indexOf(".") ? n.length : 0).length > 4) && e.preventDefault() } })) }, eMASReferencialJs.EventoAceptaRangoValorDecimal = function () { $(".aceptaRangoValorDecimal").on("keypress keyup blur", (function (e) { if ($(this).val($(this).val().replace(/[^0-9\.]/g, "")), 0 !== e.which && 8 !== e.which && (e.keyCode < 37 || e.keyCode > 40) && (46 !== e.which || -1 !== $(this).val().indexOf(".")) && (e.which < 48 || e.which > 57)) e.preventDefault(); else if (e.which >= 48 && e.which <= 57) { var n = $(this).val() + String.fromCharCode(e.which); (parseFloat(n) < 0 || parseFloat(n) > 100 || n.substring(n.indexOf(".") + 1, -1 !== n.indexOf(".") ? n.length : 0).length > 2) && e.preventDefault() } })) }, eMASReferencialJs.FormarMensaje = function (e) { for (var n = "", t = 0; t < e.length; t++)1 === e.length ? n += e[t] : t !== e.length - 1 ? n += "* " + e[t] + "<br>" : n += "* " + e[t]; return n }, eMASReferencialJs.GenerarComponenteFechaHora = function (e, n, t, a, r) { var o = "TIME" === n ? "'fa fa-clock-o'" : "'fa fa-calendar'"; return e.addClass("input-group date"), e.css("width", "100%"), void 0 !== a && void 0 !== r ? (e.append('<input type="text" class="form-control" name="' + a + '" required />'), e.append('<span class="input-group-addon"><div class="btnDateTimeEdit"><i class=' + o + "></i></div></span>"), e.append('<div class="invalid-feedback">Campo requerido.</div>')) : (e.append('<input type="text" class="form-control" />'), e.append('<span class="input-group-addon"><div class="btnDateTimeEdit"><i class=' + o + "></i></div></span>")), e.datetimepicker({ format: "DATETIME" === n ? "DD/MM/YYYY HH:mm" : "DATE" === n ? "DD/MM/YYYY" : "TIME" === n && "HH:mm", icons: { time: "fa fa-clock-o", date: "fa fa-calendar", up: "fa fa-arrow-up", down: "fa fa-arrow-down" }, defaultDate: null !== t && "" !== t && void 0 !== t && t }), e }, eMASReferencialJs.ObtenerFecha = function (e) { try { var n = e.data("DateTimePicker").date()._d; return n.getFullYear() + "-" + (n.getMonth() + 1) + "-" + n.getDate() } catch (e) { return "" } }, eMASReferencialJs.VincularComponenteFechaHora = function (e, n) { e.on("dp.change", (function (e) { n.data("DateTimePicker").minDate(e.date) })), n.on("dp.change", (function (n) { e.data("DateTimePicker").maxDate(n.date) })) }, eMASReferencialJs.ConvertirFecha = function (e) { var n = ""; if (null !== e) { var t = e.split("/"); n = t[2] + "-" + t[1] + "-" + t[0] } return n }, eMASReferencialJs.ObtenerFechaFormatoYYYYMMDD = function (e) { try { var n = e.data("DateTimePicker").date()._d; return n.getFullYear() + "-" + (n.getMonth() + 1) + "-" + n.getDate() } catch (e) { return null } }, eMASReferencialJs.FormatoMes = function (e, n, t) { var a; switch (e) { case 1: a = "Enero"; break; case 2: a = "Febrero"; break; case 3: a = "Marzo"; break; case 4: a = "Abril"; break; case 5: a = "Mayo"; break; case 6: a = "Junio"; break; case 7: a = "Julio"; break; case 8: a = "Agosto"; break; case 9: a = "Septiembre"; break; case 10: a = "Octubre"; break; case 11: a = "Noviembre"; break; case 12: a = "Diciembre" }return a }, eMASReferencialJs.FormatoFecha = function (e, n, t) { return moment(e).format("MM/DD/YYYY") }, eMASReferencialJs.GenerarComponenteTabla = function (e, n, t, a, r, o) { null !== a ? e.bootstrapTable({ uniqueId: n, columns: t, toolbar: a, search: o }) : e.bootstrapTable({ uniqueId: n, columns: t, search: o }), e.children("thead").addClass("theadTable"), e.bootstrapTable("load", null === r ? [] : r) }, eMASReferencialJs.FormatoCasillaSeleccion = function (e, n, t) { return e ? "<input type='checkbox' checked disabled>" : "<input type='checkbox' disabled>" }, eMASReferencialJs.ObtenerSeleccion = function (e) { return $.map(e.bootstrapTable("getSelections"), (function (e) { return e }))[0] }, eMASReferencialJs.ObtenerSelecciones = function (e) { return $.map(e.bootstrapTable("getSelections"), (function (e) { return e })) }, eMASReferencialJs.GenerarComponenteSelector = function (e) { e.chosen({ width: "100%" }), e.trigger("chosen:updated") }, eMASReferencialJs.InsertarElementosComponenteSelector = function (e, n) { var t = e.val(); e.empty().append($("<option>", { value: 0, text: "Seleccione..." })), $.each(n, (function (n, t) { e.append($("<option>", { value: t.Value, text: t.Text })) })), null !== t && n.findIndex((e => e.Value === t)) < 0 && (t = 0), e.val(null !== t ? t : 0), e.trigger("chosen:updated") }, eMASReferencialJs.InsertarElementoComponenteSelector = function (e, n, t) { e.empty().append($("<option>", { value: 0, text: "Seleccione..." })), e.append($("<option>", { value: n, text: t })), e.val(null !== n ? n : 0), e.trigger("chosen:updated") }, eMASReferencialJs.LimpiarComponenteSelector = function (e) { e.empty().append($("<option>", { value: 0, text: "Seleccione..." })), e.val(0), e.trigger("chosen:updated") }, eMASReferencialJs.Ajax = function (e, n, t, a) { $.ajax(e).fail((function (a, r, o) { var l = ""; let i = eMASReferencialJs.ObtenerAppConfig().RutaBase; if (i = "/" === i ? "/" : i + "/", 403 === a.status || 401 === a.status) eMASReferencialJs.ocultarProgress(), l = "<span>Su sesi&oacute;n ha caducado, para volver a iniciar presione </span><a href='" + eMASReferencialJs.serverPath + "'><b>Aqu&iacute;</b></a>", eMASReferencialJs.mostrarMensajes("Sesión", eMASReferencialJs.tipoMensaje.Advertencia, [{ Description: l }], []); else { var s = eMASReferencialJs.Error.ErrorGeneral + " Detalle los siguientes datos para salucionar el problema. </br>Ruta: " + e.url; "" !== a.status.toString() && (s = s + "</br> StatusCode: " + a.status.toString()), "" !== a.statusText && (s = s + "</br> StatusText: " + a.statusText), "" !== a.responseText && (s = s + "</br> ResponseText: " + a.responseText), null !== n && n(), "alert" === t ? $("#div-alert").html("<div class='alert alert-danger alert-dismissible fade show' role='alert'>" + s + "<button type='button' class='close' data-dismiss='alert' aria-label='Close'><span aria-hidden='true'>&times;</span></button></div>") : eMASReferencialJs.mostrarMensajes("Error", eMASReferencialJs.tipoMensaje.Error, [{ Description: s }], [eMASReferencialJs.botonAceptar]) } })).always((function () { null != a && a() })) }, eMASReferencialJs.SetearEventosPanel = function (e) { $(".panel-collapse").on("show.bs.collapse", (function () { $(this).siblings(".panel-heading").addClass("active"); let e = document.querySelector(".consult-ls"); null != e && (e.style.display = "none") })), $(".panel-collapse").on("hide.bs.collapse", (function () { $(this).siblings(".panel-heading").removeClass("active"); let n = document.querySelector(".consult-ls"); if (null != n) { let t = $("#" + e).bootstrapTable("getOptions"); null == t && null == t || t.totalRows > 0 && (n.style.display = "block") } })) }, eMASReferencialJs.ObtenerAppConfig = function () { return { RutaBase: $("#hdnRutaBase").val(), FormatoFechaCliente: "dd/MM/yyyy" } }, eMASReferencialJs.FormSetVisibilityConsult = function (e, n) { let t = document.querySelector(".consult-ls"); if (null != t && (t.style.display = e ? "" : "none"), "" == n || null == n) return; let a = $("#" + n).bootstrapTable("getOptions"); null == a && null == a || 0 != a.totalRows && null != a.totalRows || e && null != t && (t.style.display = "none") }, eMASReferencialJs.FormSetVisibilityPanel = function (e) { let n = document.querySelector(".panel-filter"); null != n && (n.style.display = e ? "" : "none") }, eMASReferencialJs.htmlToElement = function (e) { var n = document.createElement("template"); return e = e.trim(), n.innerHTML = e, n.content.firstChild }, eMASReferencialJs.SetearMensajeDefaultAdvertencia = function (e) { eMASReferencialJs.mostrarMensajes(eMASReferencialJs.Advertencia.Titulo, eMASReferencialJs.tipoMensaje.Advertencia, [{ Description: e }], [eMASReferencialJs.botonAceptar]) }, eMASReferencialJs.SetearMensajeDefaultExito = function (e) { eMASReferencialJs.mostrarMensajes(eMASReferencialJs.Exito.Titulo, eMASReferencialJs.tipoMensaje.Exito, [{ Description: e }], [eMASReferencialJs.botonAceptar]) }, eMASReferencialJs.SetearPlantillaPagineo = function (e, n, t, a) { let r = "", o = "", l = t, i = a, s = $("#" + n), c = Array(), d = 1; for (let e = i; e <= l; e++)c[0] = a, l != i && c[d - 1] != l && (c[d] = e + 1), d++; c = c.slice(0, 5); let u = l, f = 1; l != i && (f = i + 1); let p = 1; i > 1 && (p = i - 1), r += '<ul class="pagination justify-content-center">', r += '<li class="page-item">', r += '<a class="page-link" href="#" onclick="' + e + "('1')\">", r += '<i class="fa fa-fast-backward"></i>', r += "</a></li>", r += '<li class="page-item"><a class="page-link" href="#" onclick="' + e + "('" + p + "')\">", r += '<i class="fa fa-backward"></i></a></li>'; for (let n = 0; n < c.length; n++)o += '<li class="page-item">', o += '<a class="page-link active" onclick="' + e + "('" + c[n] + '\')" href="#">', o += (c[n] === i ? "<strong>" + c[n] + "</strong>" : c[n]) + "</a>", o += "</li>"; r += o + '<li class="page-item"><a class="page-link" href="#" onclick="' + e + "('" + f + "')\">", r += '<i class="fa fa-forward"></i></a></li>', r += '<li class="page-item">', r += '<a class="page-link" href="#" onclick="' + e + "('" + u + "')\">", r += '<i class="fa fa-fast-forward"></i></a></li></ul>', s.append(r) }, eMASReferencialJs.EncontrarMensaje = function (e) { return e.codigo == this.codigo }, eMASReferencialJs.SetearEvtFormularioGenerico = function (e, n, t, a) { let r = document.querySelector(".regresar-edit"), o = document.querySelector(".cancelar-edit"), l = document.querySelector(".guardar-edit"); r.removeEventListener("click", e), r.addEventListener("click", e), o.removeEventListener("click", n), o.addEventListener("click", n), l.removeEventListener("click", t), l.addEventListener("click", t) }, eMASReferencialJs.InicializarPanelGenerico = function (e, n, t, a, r) { let o = document.querySelector("#" + e + " .panel-body"), l = document.querySelector(".consult-ls"), i = document.querySelector(".consultar"), s = document.querySelector(".limpiar"), c = document.querySelectorAll(".nuevo"); null != o && eMASReferencialJs.SetearEventosPanel(r), null != l && (l.style.display = "none"), null != i && i.addEventListener("click", a), null != s && s.addEventListener("click", t), null != c && c.forEach((function (e) { e.addEventListener("click", n) })), eMASReferencialJs.FormSetVisibilityConsult(!1) }, eMASReferencialJs.CargarCombosGenerico = function (e) { let n = e.length; if (n > 0) for (let t = 0; t < n; t++) { let n = e[t], a = { key1: n.key, target: n.ctrl }, r = null == n.parameter1 ? "" : n.parameter1, o = null == n.parameter2 ? "" : n.parameter2; eMASReferencialJs.FetchPost(n.ruta, a, eMASReferencialJs.CargarCombosGenericoRespuesta, n.fnCallback2, r, o) } }, eMASReferencialJs.LimpiarControlesHtml = function (e) { let n = document.querySelector(e); if (null == n || null == n) return; let t = n.querySelectorAll("input"); null != t && null != t && t.forEach((function (e) { e.value = "" })); let a = n.querySelectorAll("select"); null != a && null != a && a.forEach((function (e) { e.selectedIndex = -1 })); let r = n.querySelectorAll(".dropdown-select span"); null != r && null != r && r.forEach((function (e) { e.textContent = "" })) }, eMASReferencialJs.CargarCombosGenericoRespuesta = function (e) { if (null != e && null != e) if (null != e.key && null != e.key && "" != e.key && null != e.target && null != e.target && "" != e.target) if ("ERROR" != e.key) { if (null != e.datasource && null != e.datasource) { let n = document.querySelector(`#${e.target}`); if (null != n && null != n) { let t = "", a = e.datasource.length; if (a > 0) { for (let n = 0; n < a; n++)t += `<option value=${e.datasource[n].key}>${e.datasource[n].value}</option>\n`; n.innerHTML = t, n.selectedIndex = -1, eMASReferencialJs.createCustomDropdown(`${e.target}`) } } } } else console.log(e.target); else console.log("Respuesta incorrecta del servidor CargarCombosGenerico (2)"); else console.log("Respuesta incorrecta del servidor CargarCombosGenerico (1)") }, eMASReferencialJs.FnGeneralVacia = function () { }, eMASReferencialJs.FetchPost = function (e, n, t, a, r, o) { let l = eMASReferencialJs.ObtenerAppConfig().RutaBase; l = "/" === l ? "/" : l + "/", fetch(l + e, { method: "POST", headers: { "Content-type": "application/json;charset=UTF-8" }, body: JSON.stringify(n) }).then((e => e.json())).then(t).then(a.bind(null, r, o)).catch((function (e) { eMASReferencialJs.ocultarProgress(), console.log("Fetchpost Generic Error", e) })) }, eMASReferencialJs.ObtenerAnioSistema = function () { return (new Date).getFullYear() }, eMASReferencialJs.FadeOutEffect = function (e, n, t) { let a = document.querySelector(e); if (null != a) { let e = n / 1e3; a.style.transition = e + "s", a.style.opacity = 0; const r = setInterval((function () { a.style.opacity <= 0 && (clearInterval(r), null != t && t()) }), n) } }, eMASReferencialJs.SetearFechaBootstrap = function (e) { $(e).datepicker({ uiLibrary: "bootstrap4", locale: "es-es", format: "dd/mm/yyyy", autoclose: !0 }) }, eMASReferencialJs.SelectItemByValue = function (e, n) { for (var t = 0; t < e.options.length; t++)if (e.options[t].value === n) { e.selectedIndex = t, document.querySelector(".dropdown-select-" + e.id + " span").textContent = e.options[t].text; break } }, eMASReferencialJs.FormatearFecha = function (e) { if (null == e || null == e || "" == e) return null; let n = "", t = e.split("/"); return 3 == t.length && (n = t[2] + "-" + t[1] + "-" + t[0]), n }, eMASReferencialJs.EsDecimalConPunto = function (e) { let n = e.target.value, t = e.which ? e.which : e.keyCode; return 46 == t ? -1 === n.indexOf(".") || (e.preventDefault(), !1) : (t > 31 && (t < 48 || t > 57) && e.preventDefault(), !1) }, eMASReferencialJs.EsDigito = function (e) { let n = e.which ? e.which : e.keyCode; return !(n > 31 && (n < 48 || n > 57)) || (e.preventDefault(), !1) }, eMASReferencialJs.EsDigitoToPaste = function (e) { const n = new RegExp("^[0-9]+$"); let t = (event.clipboardData || window.clipboardData).getData("text"); return !!n.test(t) || (e.preventDefault(), !1) }, eMASReferencialJs.SetearLabelError = function (e, n, t) { let a = document.querySelector(n); if (null != a && null != a) if (e) { let e = `<strong>Error</strong> - ${t}`; a.classList.remove("hidden"), a.innerHTML = e } else a.classList.remove("hidden"), a.classList.add("hidden"), a.innerHTML = ""; else console.error("El elemento No Existe") }, eMASReferencialJs.EmisionPromptWarning = function (e, n, t) { let a = t; null == a && (a = "$(this).parents('.modal-dialog').parent().modal('hide');"); let r = n; eMASReferencialJs.mostrarMensajes(eMASReferencialJs.Advertencia.Titulo, eMASReferencialJs.tipoMensaje.Prompt, [{ Description: e }], [{ Nombre: "Si", Accion: r }, { Nombre: "No", Accion: a }]) }, eMASReferencialJs.ConsultPosLlenarComboGeneric = function (e, n) { let t = document.querySelector(`#${e}`), a = document.querySelector(`#${n}`); null != t && null != a && eMASReferencialJs.SelectItemByValue(t, a.value) }, eMASReferencialJs.setearInputEnMayuscula = function (e) { var n = e.target.selectionStart, t = e.target.selectionEnd; e.target.value = e.target.value.toUpperCase(), e.target.setSelectionRange(n, t) }, eMASReferencialJs.setearInputsEventsEnFormulario = function (e) { let n = document.querySelectorAll(e); if (null == n || null == n) return; let t = Array.from(n), a = t.length; for (let e = 0; e < a; e++)t[e].addEventListener("keyup", eMASReferencialJs.setearInputEnMayuscula, !1), t[e].autocomplete = "off" }, eMASReferencialJs.keyDownOnlyPositiveNumbersValidation = function (e) { return e.keyCode > 95 && e.keyCode < 106 || e.keyCode > 47 && e.keyCode < 58 || 8 == e.keyCode || 9 == e.keyCode || (e.preventDefault(), !1) }, eMASReferencialJs.replaceSpecialCharacters = function (e) { let n = e.target.value; null != n && null != n && (n = n.replace("á", "a"), n = n.replace("é", "e"), n = n.replace("í", "i"), n = n.replace("ó", "o"), n = n.replace("ú", "u"), n = n.replace("Á", "A"), n = n.replace("É", "E"), n = n.replace("Í", "I"), n = n.replace("Ó", "O"), n = n.replace("Ú", "U")), e.target.value = n }, eMASReferencialJs.whenClickOutsideCombobox = function () { $(document).on("click", (function (e) { 0 === $(e.target).closest(".dropdown-select").length && ($(".dropdown-select").removeClass("open"), $(".dropdown-select .option").removeAttr("tabindex")), e.stopPropagation() })) }, eMASReferencialJs.createCustomDropdown = function (e) { $("#" + e).each((function (n, t) { if (!$(this).next().hasClass("dropdown-select-" + e)) { $(this).after('<div class="dropdown-select dropdown-select-' + e + " wide " + ($(this).attr("class") || "") + '" tabindex="0"><span class="current"></span><div class="list"><ul></ul></div></div>'); var a = $(this).next(), r = $(t).find("option"), o = $(this).find("option:selected"); a.find(".current").html(o.data("display-text") || o.text()); for (let e = 0; e < r.length; e++) { var l = $(r[e]).data("display-text") || ""; a.find("ul").append('<li class="option ' + ($(r[e]).is(":selected") ? "selected" : "") + '" data-value="' + $(r[e]).val() + '" data-display-text="' + l + '">' + $(r[e]).text() + "</li>") } $(".dropdown-select-" + e + " ul").before('<div class="dd-search"><input autocomplete="off" onkeyup="eMASReferencialJs.filterTextInCombobox(\'' + e + '\')" class="txtSearchValue-' + e + ' dd-searchbox" type="text"></div>'), $(".dropdown-select-" + e).on("click", (function (n) { $(n.target).hasClass("dd-searchbox") || ($(".dropdown-select-" + e).not($(this)).removeClass("open"), $(this).toggleClass("open"), $(this).hasClass("open") ? ($(this).find(".option").attr("tabindex", 0), $(this).find(".selected").focus()) : ($(this).find(".option").removeAttr("tabindex"), $(this).focus())) })), $(".dropdown-select-" + e + " .option").on("click", (function (n) { $(this).closest(".list").find(".selected").removeClass("selected"), $(this).addClass("selected"); var t = $(this).data("display-text") || $(this).text(); $(this).closest(".dropdown-select-" + e).find(".current").text(t), $(this).closest(".dropdown-select-" + e).prev("select").val($(this).data("value")).trigger("change") })), $(".dropdown-select-" + e).on("keydown", (function (e) { var n = $($(this).find(".list .option:focus")[0] || $(this).find(".list .option.selected")[0]); if (13 == e.keyCode) return $(this).hasClass("open") ? n.trigger("click") : $(this).trigger("click"), !1; if (40 == e.keyCode) return $(this).hasClass("open") ? n.next().focus() : $(this).trigger("click"), !1; if (38 == e.keyCode) { if ($(this).hasClass("open")) (n = $($(this).find(".list .option:focus")[0] || $(this).find(".list .option.selected")[0])).prev().focus(); else $(this).trigger("click"); return !1 } return 27 == e.keyCode ? ($(this).hasClass("open") && $(this).trigger("click"), !1) : void 0 })) } })) }, eMASReferencialJs.filterTextInCombobox = function (e) { var n = $(".txtSearchValue-" + e).val(); $(".dropdown-select-" + e + " ul > li").each((function () { $(this).text().toLowerCase().indexOf(n.toLowerCase()) > -1 ? $(this).show() : $(this).hide() })) };